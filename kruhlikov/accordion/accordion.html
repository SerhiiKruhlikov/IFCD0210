<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
  <style>
    .accordion {
      border: 1px solid #ddd;
      border-radius: 8px;
      margin-bottom: 10px;
      overflow: hidden;
    }

    .accordion__header {
      width: 100%;
      padding: 16px 20px;
      background: #f8f9fa;
      border: none;
      text-align: left;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background 0.2s;
    }

    .accordion__header:hover {
      background: #e9ecef;
    }

    .accordion__icon {
      width: 24px;
      height: 24px;
      transition: transform 0.3s ease;
    }

    .accordion.open .accordion__icon {
      transform: rotate(180deg);
    }

    /* Ключевая часть: Grid-анимация */
    .accordion__content {
      display: grid;
      grid-template-rows: 0fr; /* Начальное состояние: схлопнуто */
      transition: grid-template-rows 0.3s ease;
    }

    .accordion.open .accordion__content {
      grid-template-rows: 1fr; /* Открытое состояние */
    }

    .accordion__body {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease, padding 0.3s ease;
      padding: 0 20px; /* Базовый горизонтальный padding */
    }

    .accordion.open .accordion__body {
      max-height: 2000px; /* Достаточно большое значение */
      padding-top: 20px; /* Плавное появление */
      padding-bottom: 20px; /* Плавное появление */
    }

    /* Дополнительные стили для контента */
    .accordion__body p {
      margin: 0 0 10px 0;
      line-height: 1.5;
    }

    .accordion__body ul {
      margin: 10px 0;
      padding-left: 20px;
    }

    .accordion__body li {
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
  <div class="accordion">
    <button class="accordion__header">
      <span>Секция 1</span>
      <svg class="accordion__icon" viewBox="0 0 24 24">
        <path d="M7 10l5 5 5-5z"/>
      </svg>
    </button>
    <div class="accordion__content">
      <div class="accordion__body">
        <p>Контент с любым отступами. Padding будет анимироваться вместе с высотой.</p>
        <p>Вторая строка контента для демонстрации.</p>
        <ul>
          <li>Элемент списка 1</li>
          <li>Элемент списка 2</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="accordion">
    <button class="accordion__header">
      <span>Секция 2</span>
      <svg class="accordion__icon" viewBox="0 0 24 24">
        <path d="M7 10l5 5 5-5z"/>
      </svg>
    </button>
    <div class="accordion__content">
      <div class="accordion__body">
        <p>Другой контент с большими отступами.</p>
        <div style="padding: 30px; background: #f0f0f0; margin: 10px 0;">
          Блок с собственным padding
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    document.querySelectorAll('.accordion__header').forEach(header => {
      header.addEventListener('click', () => {
        const accordion = header.parentElement;
        const isOpen = accordion.classList.contains('open');

        // Закрыть все открытые аккордеоны (опционально)
        // document.querySelectorAll('.accordion.open').forEach(openAccordion => {
        //   if (openAccordion !== accordion) {
        //     openAccordion.classList.remove('open');
        //   }
        // });

        // Переключить текущий
        accordion.classList.toggle('open');

        // Для accessibility
        const content = header.nextElementSibling;
        const body = content.querySelector('.accordion__body');
        if (accordion.classList.contains('open')) {
          header.setAttribute('aria-expanded', 'true');
          body.setAttribute('aria-hidden', 'false');
        } else {
          header.setAttribute('aria-expanded', 'false');
          body.setAttribute('aria-hidden', 'true');
        }
      });
    });

    // Инициализация accessibility атрибутов
    document.querySelectorAll('.accordion').forEach(accordion => {
      const header = accordion.querySelector('.accordion__header');
      const body = accordion.querySelector('.accordion__body');

      header.setAttribute('aria-expanded', 'false');
      header.setAttribute('aria-controls', body.id || `accordion-body-${Math.random().toString(36).substr(2, 9)}`);
      body.setAttribute('aria-hidden', 'true');
      if (!body.id) {
        body.id = header.getAttribute('aria-controls');
      }
    });
  </script>
</body>
</html>