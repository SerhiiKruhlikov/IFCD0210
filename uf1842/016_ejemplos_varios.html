<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>016 Ejemplos varios</title>
	<style>
		root {
            --status-scroll-width: 0px;
            --status-scroll-height: 15px;
		}
		* {
			box-sizing: border-box;
		}
		html {
			font-family: 'Helvetica Neue', sans-serif;
            scroll-behavior: smooth;
		}
		header {
			width: 100%;
			background-color: #eee;
			padding: 1rem;
		}
		.status-scroll {
            position: fixed;
			height: 5px;
            background-color: lightgray;
			width: 100%;
			left: 0;
			top: 0;
			z-index: 1;
		}
		.status-scroll::after {
			inset: 0;
            content: '';
            position: absolute;
            width: var(--status-scroll-width, 0);
            height: var(--status-scroll-height, 5px);
            background: #8663ff;
        }
		.flecha {
			display: flex;
            justify-content: center;
            align-items: center;
            position: fixed;
			bottom: 3rem;
			right: 0;
			opacity: 0;
			transition: .3s opacity;
			width: 2rem;
			height: 2rem;
			background-color: lightgray;
			border-top-left-radius: .25rem;
			border-bottom-left-radius: .25rem;
			cursor: pointer;
		}

		.contenedor {
			padding: 3rem;
			margin: 0 auto;
			max-width: 40rem;
			display: flex;
            flex-direction: column
		}
		.tabs,
        .tab-content {
			display: flex;
		}
		.tabs .tab {
			bottom: -1px;
			position: relative;
			display: inline-block;
			padding: 1rem 2rem;
            border: 1px solid transparent;
            border-bottom: 1px solid #e7b91c;
			transition: .15s all;
			color: #595959;
            font-weight: 600;
		}
		.tabs .tab:not(.active):hover {
			cursor: pointer;
			background-color: rgba(231, 185, 28, 0.15);
		}
		.tab-content {
			padding: 2rem;
			display: none;
            border: 1px solid #e7b91c;
		}
		.tabs .tab.active {
			background-color: #f5f5f5;
			color: #000;
			border: 1px solid #e7b91c;
			border-bottom-color: #f5f5f5;
		}
		.tab-content.active {
            background-color: #f5f5f5;
			display: inline-block;
		}
	</style>

</head>
<body>
	<div id="status_scroll" class="status-scroll"></div>

	<h2>Barra de progreso con scroll</h2>

	<div style="height: 2000px;">
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Alias aut, delectus dolorem dolores est facere labore libero maiores nesciunt non praesentium quas quos ratione sint unde vel vitae? Animi, similique!</p>

		<textarea id="text" name="text" placeholder="input texto" maxlength="40"></textarea>
		<p>Utilizados <span id="cantidad">0</span> de 40 caracteres.</p>
		<button	id="back">Back</button>
		<hr>
		<div class="contenedor">
			<div class="tabs">
				<div class="tab active" data-target="tab1">Tab 1</div>
				<div class="tab" data-target="tab2">Tab 2</div>
				<div class="tab" data-target="tab3">Tab 3</div>
			</div>
			<!-- Contenidos de las pestaÃ±as -->
			<div id="tab1" class="tab-content active">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequuntur ducimus esse possimus vel! Dolores eos error eum libero nisi quia rem saepe ut vitae. Doloribus ea officiis placeat praesentium velit?</div>
			<div id="tab2" class="tab-content">Dolor sit amet, consectetur adipisicing elit. Animi et hic, illum laborum magnam tempora tempore ut. Cum debitis, enim ex excepturi inventore labore nam nisi perspiciatis placeat temporibus ullam?</div>
			<div id="tab3" class="tab-content">Consectetur adipisicing elit. Ab facilis fuga nemo qui ullam. Cum incidunt itaque porro quidem, repellendus voluptates? Beatae consequuntur, eligendi eum inventore maiores sed. Molestiae, nulla!</div>
		</div>

		<hr>
	</div>



	<div id="flecha" class="flecha">^</div>

	<script type="text/javascript">
		window.addEventListener("scroll", (event) => {
            let scrolled = window.scrollY;
            let altura = document.body.scrollHeight - window.innerHeight;
            // let width = document.getElementById("status_scroll").style.width = (scrolled / altura) * 100 + "%";
            let width = (scrolled / altura) * 100 + "%";
            document.getElementById("status_scroll").style.setProperty('--status-scroll-width', width);

            let flecha = document.getElementById("flecha");

            console.log(width);

            if ((scrolled / altura) * 100 > 30)
                flecha.style.opacity = 1;
            else
                flecha.style.opacity = 0;
        });

        document.getElementById("flecha").addEventListener("click", () => {
            window.scrollTo({
                    top: 0,
                    left: 0,
                    behavior: 'smooth'
                }
			);
		});

        let historial = [];

        document.getElementById("text").addEventListener("input", (element) => {
            document.getElementById("cantidad").innerText = element.target.value.length;
            historial.push(element.target.value);
            console.log(historial);
		});

        document.getElementById("back").addEventListener("click", (element) => {
            document.getElementById("text").value = historial.pop() || "";
        });



        let tabs = document.querySelectorAll(".tab");
        let contenidos = document.querySelectorAll(".tab-content");

        for (let i = 0; i < tabs.length; i++) {
            tabs[i].addEventListener("click", (el) => {
                for (let j = 0; j < tabs.length; j++) {
                    tabs[j].classList.remove("active");
                    contenidos[j].classList.remove("active");
				}
                console.log(el.target);
                el.target.classList.add("active");
                let targetId = el.target.getAttribute("data-target");
                let targetContent = document.getElementById(targetId);
                targetContent.classList.add("active");
			});

		}






	</script>

</body>
</html>